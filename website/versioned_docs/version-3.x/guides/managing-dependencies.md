---
id: version-3.x-managing-dependencies
title: Managing Dependencies
sidebar_label: Managing Dependencies
original_id: managing-dependencies
---

NPM uses a file called [`package-lock.json`](https://docs.npmjs.com/files/package-lock.json) as a "lockfile".  
A lockfile lists the exact dependency versions that are expected to be downloaded and installed when `npm install` is executed.

Generally there are two approaches to working with dependencies in the NPM ecosystem:

1. **Using a lockfile** - if a `package-lock.json` is present, the exact dependency versions defined in that lockfile will be downloaded when you `npm install`.  
   The `package-lock.json` will be committed to source-control and will affect all developers working on the project and the CI builds.
2. **Not using a lockfile** - if `package-lock.json` is not present, whenever you do a fresh `npm install` the latest versions of your dependencies will be downloaded from the npm registry (based on semantic versioning as detailed [here](https://docs.npmjs.com/about-semantic-versioning#using-semantic-versioning-to-specify-update-types-your-package-can-accept)).

This is a high-level explanation. For more details you can read up on the [NPM documentation](https://docs.npmjs.com/files/package-locks)

## What are the advantages\disadvantages of each approach?

Advantages of using a lockfile:

- By locking the entire dependency tree, changes in 3rd party libraries are only applied when you choose to initiate an upgrade.  
  This reduces the likelihood of introducing bugs related to these changes without you knowing.
- Having a lockfile helps assure reproducible deterministic builds- meaning if the `install` step passed successfully when the lockfile was created\changed, then each subsequent build that only reads the existing lockfile should also pass and the exact same content will be installed.
- Having a lockfile results in significantly faster installations.

Disadvantages of using a lockfile:

- Having a lockfile means needing to remember to update the lockfile and reason about the changes, and deal with lockfile conflicts.  
  This is especially problematic when your dependencies change often (as in the case internally in Wix where your package version is auto-incremented on every commit).

## What is the default\preferred approach?

Because of the advantages mentioned above, the default NPM behavior is to use a lockfile, and one is generated automatically when you run `npm install` for the first time.  
However for projects generated by `create-yoshi-app` a `package-lock.json` will not be generated.  
This is because in Wix it's common to depend on other Wix packages that update often (on every commit), therefore you would need to update your `package-lock.json` very often and conflicts are likely.

## How to start using a lockfile?

By default, projects generated by `create-yoshi-app` do not use a lockfile. To use a lockfile, edit the `.npmrc` file (NPM configuration file) in the root folder and set `package-lock=true`.  
The next time you run `npm install` a lockfile will be created and you should commit it.
